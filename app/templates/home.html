{% extends "base.html" %}
{% load static %}

{% block title %}Inicio · Eventos{% endblock %}

{% block content %}
<style>
  body {
    background-image: url("{% static 'images/foto_home.jpeg' %}");
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
  }

  /* Carrusel */
  .carousel-inner img {
    max-height: 450px;
    width: 100%;
    object-fit: cover;
  }
  .carousel-item { position: relative; } /* <-- necesario para el ::before */
  .carousel-item::before {
    content: "";
    position: absolute;
    inset: 0;                /* top/right/bottom/left: 0 */
    background: rgba(0,0,0,.4);
    z-index: 1;
  }
  .carousel-caption { z-index: 2; }
  .carousel-item img {
    transform: scale(1.1);
    transition: transform 8s ease-in-out;
  }
  .carousel-item.active img { transform: scale(1); }

  /* Títulos */
  h4 {
    color: lightgray; /* si querías naranja, usá: color: orange; */
    font-weight: bold;
    text-transform: uppercase;
  }

  /* Categorías */
  .cat-card-link { aspect-ratio: 1 / 1; background: #f5f5f5; }
  .cat-img { object-fit: cover; transition: transform .35s ease; }
  .cat-card-link:hover .cat-img { transform: scale(1.06); }

  .cat-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,.45);
    opacity: 0;
    transition: opacity .25s ease;
  }
  .cat-card-link:hover .cat-overlay { opacity: 1; }

  .cat-name {
    color: #fff;
    text-transform: uppercase;
    letter-spacing: .5px;
    font-size: 1.05rem;
    text-align: center;
    padding: .25rem .5rem;
  }
</style>

<div class="container-fluid p-0">
  <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-inner">
  {% for event in events %}
    <div class="carousel-item {% if forloop.first %}active{% endif %}">
      <img src="{% if event.image %}{{ event.image.url }}{% else %}{% static 'images/foto_home.jpeg' %}{% endif %}" class="d-block w-100" alt="{{ event.title }}">
      <div class="carousel-caption d-none d-md-block">
        <h5>{{ event.title }}</h5>
        <p>{{ event.description|truncatechars:80 }}</p>
      </div>
    </div>
  {% endfor %}
</div>
    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Anterior</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Siguiente</span>
    </button>
  </div>
</div>

<div class="container mt-4">
  <h4 class="mb-3">Categorías</h4>

  <div class="row g-3">
    {% for categoria in categories %}
      <div class="col-6 col-md-3">
        <a href="{% url 'eventos_por_categoria' categoria.id %}"
           class="cat-card-link d-block position-relative overflow-hidden rounded-3 shadow-sm">
          <img
            src="{% if categoria.image %}{{ categoria.image.url }}{% else %}{% static 'img/categoria-placeholder.jpg' %}{% endif %}"
            alt="Categoría {{ categoria.name }}"
            class="w-100 h-100 cat-img"
            loading="lazy"
          />
          <div class="cat-overlay d-flex align-items-center justify-content-center">
            <span class="cat-name fw-semibold">{{ categoria.name }}</span>
          </div>
        </a>
      </div>
    {% empty %}
      <p>No hay categorías disponibles.</p>
    {% endfor %}
  </div>
</div>
{% endblock content %}
